const room_name=JSON.parse(document.getElementById("json-roomname").textContent),user_name=JSON.parse(document.getElementById("json-username").textContent),req_user_name=JSON.parse(document.getElementById("json-req-username").textContent);document.getElementById("chat-message-input").focus();var start="";start="https:"==window.location.protocol?"wss":"ws",console.log(start);const endpoint=`${start}://${window.location.host}/${start}/${room_name}/`;console.log(endpoint);var chat_socket=new ReconnectingWebSocket(endpoint);function dateToYMD(e){var t=e.getDate(),n=e.getMonth()+1;return e.getFullYear()+"-"+(n<=9?"0"+n:n)+"-"+(t<=9?"0"+t:t)}chat_socket.onmessage=function(e){console.log("On Message");var t="",n=JSON.parse(e.data),s=n.username,a=new Date;let o=`${a.getHours()}:${a.getMinutes()}`;var c=`${dateToYMD(a)} ${o}`;console.log(s),n.message?req_user_name===s?(t=`\n            <div class="w-full flex justify-start">\n                <div class="bg-gray-100 rounded px-5 py-2 my-2 text-gray-700 relative"\n                     style="max-width: 300px;">\n                     <strong><span class="block text-xs text-right">${s}</span></strong>\n                    <span class="block">${n.message}</span>\n                    <span class="block text-xs text-right">${c}</span>\n                </div>\n            </div>`,document.getElementById("chat-messages").innerHTML+=t):(t=`\n            <div class="w-full flex justify-end">\n                <div class="bg-gray-100 rounded px-5 py-2 my-2 text-gray-700 relative"\n                     style="max-width: 300px;">\n                     <strong><span class="block text-xs text-right">${s}</span></strong>\n                    <span class="block">${n.message}</span>\n                    <span class="block text-xs text-left">${c}</span>\n                </div>\n            </div>\n            `,document.getElementById("chat-messages").innerHTML+=t):alert("Message is Empty!")},chat_socket.onclose=function(e){console.log("Closed")},document.getElementById("chat-message-submit").onclick=function(e){const t=document.getElementById("chat-message-input"),n=t.value;chat_socket.send(JSON.stringify({message:n,username:user_name,room:room_name})),t.value=""},document.getElementById("chat-message-input").addEventListener("keyup",function(e){if("Enter"===e.code){const e=document.getElementById("chat-message-input"),t=e.value;chat_socket.send(JSON.stringify({message:t,username:user_name,room:room_name})),e.value=""}});